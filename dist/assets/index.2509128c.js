import{c as X,r as T,w as A,a as m,b as u,d as r,e as _,t as f,f as Z,g as L,o as i,h as H,v as F,F as I,i as W,j as k,k as D,l as b,m as K,p as V,n as j,q,s as R,u as ee,x as oe,y as te,z as ne,A as se,B as ae,C as re,D as ce,E as de,G as le,H as ie}from"./vendor.3f2e7fd9.js";const ue=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const d of s)if(d.type==="childList")for(const a of d.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const d={};return s.integrity&&(d.integrity=s.integrity),s.referrerpolicy&&(d.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?d.credentials="include":s.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(s){if(s.ep)return;s.ep=!0;const d=t(s);fetch(s.href,d)}};ue();var p;(function(e){e.setTodoItemAsDone="setTodoItemAsDone",e.removeTodoItem="removeTodoItem",e.setTodos="setTodos",e.setTags="setTags",e.addOverlay="addOverlay",e.removeOverlay="removeOverlay"})(p||(p={}));var g;(function(e){e[e.WAITING=0]="WAITING",e[e.DONE=1]="DONE"})(g||(g={}));const _e={[p.setTodoItemAsDone](e,o){const t=[...e.todos],n=t.find(s=>s.id===o);n&&(n.state=g.DONE),e.todos=t},[p.removeTodoItem](e,o){const t=[...e.todos],n=t.findIndex(s=>s.id===o);n>=0&&t.splice(n,1),e.todos=t},[p.setTodos](e,o){e.todos=o},[p.setTags](e,o){e.tags=o},[p.addOverlay](e,o){const t=[...e.overlays];t.find(n=>n.overlayId===o.overlayId)||(t.push(o),e.overlays=t)},[p.removeOverlay](e,o){const t=[...e.overlays],n=t.findIndex(s=>s.overlayId===o);n>=0&&(t.splice(n,1),e.overlays=t)}};var C;(function(e){e.setTodoItemAsDone="setTodoItemAsDone",e.removeTodoItem="removeTodoItem",e.loadTodos="loadTodos",e.loadTags="loadTags"})(C||(C={}));var P;(function(e){e[e.ERROR=0]="ERROR",e[e.OK=1]="OK"})(P||(P={}));const me=[{id:"todo-1",name:"tomatoe",description:"buy yellow tomatoe",state:g.WAITING},{id:"todo-2",name:"chocolate",description:"80% chocolate",state:g.WAITING},{id:"todo-3",name:"hammer",description:"",state:g.WAITING},{id:"todo-4",name:"soil flower",description:"",state:g.DONE}],ve=[{id:"tag-1",name:"gardening"},{id:"tag-2",name:"tools"},{id:"tag-3",name:"food"}],S=async e=>new Promise(o=>{c.state.isLoading=!0,setTimeout(()=>{c.state.isLoading=!1,o({status:P.OK,data:e})},500)}),pe=async()=>await S({todos:me}),ge=async()=>await S({tags:ve}),ye=async e=>await S(),fe=async(e,o)=>await S(),he={async[C.setTodoItemAsDone]({commit:e},o){try{await fe(o,g.DONE),e(p.setTodoItemAsDone,o)}catch({errorDescr:t}){console.log(t)}},async[C.removeTodoItem]({commit:e},o){try{await ye(o),e(p.removeTodoItem,o)}catch({errorDescr:t}){console.log(t)}},async[C.loadTodos]({commit:e}){try{const{data:o}=await pe();e(p.setTodos,o==null?void 0:o.todos)}catch({errorDescr:o}){console.log(o)}},async[C.loadTags]({commit:e}){try{const{data:o}=await ge();e(p.setTags,o==null?void 0:o.tags)}catch({errorDescr:o}){console.log(o)}}};var w;(function(e){e.waitingTodos="waitingTodos",e.doneTodos="doneTodos",e.getTagById="getTagById",e.getTodoItemById="getTodoItemById"})(w||(w={}));const Te={[w.waitingTodos](e){return e.todos.filter(o=>o.state===g.WAITING)},[w.doneTodos](e){return e.todos.filter(o=>o.state===g.DONE)},[w.getTagById]:e=>o=>e.tags.find(t=>t.id===o),[w.getTodoItemById]:e=>o=>e.todos.find(t=>t.id===o)},Ie=Symbol(),$e={todos:[],tags:[],isLoading:!1,overlays:[]},c=X({state:$e,getters:Te,mutations:_e,actions:he});function M(){const e=T(c.state.isLoading);return A(()=>c.state.isLoading,()=>{e.value=c.state.isLoading}),{isLoading:e}}var h=(e,o)=>{for(const[t,n]of o)e[t]=n;return e};const Oe={emits:["close"],props:{id:String,title:String},setup(e,{emit:o}){const t=T(!1);return A(()=>c.state.overlays,s=>{const d=s.find(a=>a.overlayId===e.id);t.value=!!d}),{overlayClose:()=>{c.commit("removeOverlay",e.id),o("close")},isDisplayed:t,title:e.title}}},Y=()=>[(t,n)=>{const s={overlayId:t,params:n};c.commit("addOverlay",s)},t=>{c.commit("removeOverlay",t)}],Ce={key:0,class:"overlay"},we={class:"title"},Ae={class:"content"};function ke(e,o,t,n,s,d){const a=m("icon");return n.isDisplayed?(i(),u("div",Ce,[r("nav",null,[r("ul",null,[r("li",null,[r("a",{onClick:o[0]||(o[0]=(...l)=>n.overlayClose&&n.overlayClose(...l))},[_(a,{icon:"angle-left",size:"2x"})])]),r("li",we,[r("div",null,f(n.title),1)])])]),r("div",Ae,[Z(e.$slots,"default",{},void 0,!0)])])):L("",!0)}var G=h(Oe,[["render",ke],["__scopeId","data-v-3b41a608"]]);const De={setup(){const{isLoading:e}=M(),o=T(null);return A(()=>c.state.overlays,t=>{console.log("value changes detected",t),o.value=t}),{isLoading:e,overlay:o}},mounted(){Promise.all([c.dispatch("loadTodos"),c.dispatch("loadTags")])},components:{Overlay:G}},be={class:"isLoading"};function Ne(e,o,t,n,s,d){const a=m("router-view");return i(),u(I,null,[_(a),H(r("div",be,"please wait...",512),[[F,n.isLoading]])],64)}var Be=h(De,[["render",Ne]]);const Le={setup(){const{isLoading:e}=M();return{isLoading:e}},data:()=>({menuItems:[{name:"home",label:"Home"},{name:"todos",label:"Todo list"},{name:"tags",label:"Tags"},{name:"history",label:"History"}]})};function Re(e,o,t,n,s,d){const a=m("router-link");return i(),u("nav",null,[r("ul",null,[(i(!0),u(I,null,W(e.menuItems,l=>(i(),u("li",{key:l.name},[_(a,{to:{name:l.name}},{default:k(()=>[D(f(l.label),1)]),_:2},1032,["to"])]))),128)),r("li",null,[H(r("div",null,"@",512),[[F,n.isLoading]])])])])}var E=h(Le,[["render",Re],["__scopeId","data-v-24b38d9c"]]);const Se=r("h1",null,"Home Page",-1),Ee=b({setup(e){return(o,t)=>(i(),u(I,null,[_(E),Se],64))}});const xe={emits:["onCancel","onRemove"],props:{todoItem:Object},setup(e,{emit:o}){var a,l;const t=(l=(a=e.todoItem)==null?void 0:a.id)!=null?l:"";return{todoItem:K(()=>c.getters.getTodoItemById(t)),remove:v=>{c.dispatch("removeTodoItem",v).then(()=>{o("onRemove",t)}).catch(O=>{console.log(O)})},cancel:()=>o("onCancel")}}},J=e=>(V("data-v-303d01c8"),e=e(),j(),e),We={class:"container"},Pe={class:"confirmation"},Ge=J(()=>r("h2",null,"Do you want to remove",-1)),ze=J(()=>r("h2",null,"?",-1)),He={class:"buttons"};function Fe(e,o,t,n,s,d){var a;return i(),u("div",We,[r("div",Pe,[Ge,r("h1",null,f((a=n.todoItem)==null?void 0:a.name),1),ze]),r("div",He,[r("button",{class:"confirm",onClick:o[0]||(o[0]=l=>{var v;return n.remove((v=n.todoItem)==null?void 0:v.id)})},"Yes"),r("button",{class:"cancel",onClick:o[1]||(o[1]=(...l)=>n.cancel&&n.cancel(...l))},"No")])])}var Ke=h(xe,[["render",Fe],["__scopeId","data-v-303d01c8"]]);var N;(function(e){e.TOP="TOP",e.BOTTOM="BOTTOM"})(N||(N={}));const Ve=b({props:{label:String,type:String},emits:["click"],setup(e,{emit:o}){var s;return{label:T(e.label),handleClick:()=>{o("click")},type:(s=e.type)==null?void 0:s.toLowerCase()}}});function je(e,o,t,n,s,d){return i(),u("div",{class:q(["action-button",e.type]),onClick:o[0]||(o[0]=(...a)=>e.handleClick&&e.handleClick(...a))},f(e.label),3)}var z=h(Ve,[["render",je]]);const qe=b({components:{Overlay:G,RemoveToDoItem:Ke,ActionButton:z},setup(){const e=T([...c.getters.waitingTodos,...c.getters.doneTodos]),o=T(c.getters.waitingTodos.length),t=T(c.getters.doneTodos.length);A(()=>c.state.todos,()=>{o.value=c.getters.waitingTodos.length,t.value=c.getters.doneTodos.length,!(e.value.length>0)&&(e.value=[...c.getters.waitingTodos,...c.getters.doneTodos])});const n=T(),[s,d]=Y();return{list:e,TodoItemState:g,remove:$=>{n.value=$,s("remove-overlay")},setAsDone:$=>{c.dispatch("setTodoItemAsDone",$).catch(B=>{console.log(B)})},isDone:()=>!e.value.find($=>$.state!==g.DONE),waitingTodosCount:o,doneTodosCount:t,handleAdd:()=>{s("add-todo-overlay")},handleOverlayClose:()=>{d("remove-overlay")},handleTodoItemRemoved:$=>{const B=e.value.findIndex(U=>U.id===$);B>=0&&e.value.splice(B,1),d("remove-overlay")},selectedTodoItem:n,ActionButtonType:N}}}),Me=e=>(V("data-v-7293671e"),e=e(),j(),e),Ye={class:"header"},Je={key:0},Qe=Me(()=>r("span",{class:"done-count"},"Well done !",-1)),Ue=[Qe],Xe={key:1},Ze=D(" to do: "),eo={class:"todo-count"},oo=D(" | done: "),to={class:"done-count"},no={class:"todo-list"},so={class:"line-1"},ao=["onClick"],ro={class:"name"},co=["onClick"],lo={key:0,class:"line-2"},io=D("Adding a new tag");function uo(e,o,t,n,s,d){var x;const a=m("icon"),l=m("ActionButton"),v=m("RemoveToDoItem"),O=m("Overlay");return i(),u(I,null,[r("h2",Ye,[e.isDone()?(i(),u("div",Je,Ue)):(i(),u("div",Xe,[Ze,r("span",eo,f(e.waitingTodosCount),1),oo,r("span",to,f(e.doneTodosCount),1)]))]),r("ul",no,[(i(!0),u(I,null,W(e.list,y=>(i(),u("li",{class:q([y.state===e.TodoItemState.DONE&&"done"]),key:y.id},[r("div",so,[r("button",{class:"do-btn",onClick:$=>y.state===e.TodoItemState.WAITING&&e.setAsDone(y.id)},[y.state===e.TodoItemState.DONE?(i(),R(a,{key:0,icon:"check-circle",size:"2x"})):L("",!0),y.state===e.TodoItemState.WAITING?(i(),R(a,{key:1,icon:"play-circle",size:"2x"})):L("",!0)],8,ao),r("div",ro,f(y.name),1),r("button",{class:"remove-btn",onClick:$=>e.remove(y)},[_(a,{icon:"trash-alt",size:"2x"})],8,co)]),y.description?(i(),u("div",lo,f(y.description),1)):L("",!0)],2))),128))]),_(l,{label:"Add Todo item",type:e.ActionButtonType.BOTTOM,onClick:e.handleAdd},null,8,["type","onClick"]),_(O,{id:"remove-overlay",title:(x=e.selectedTodoItem)==null?void 0:x.name},{default:k(()=>[_(v,{todoItem:e.selectedTodoItem,onOnCancel:e.handleOverlayClose,onOnRemove:e.handleTodoItemRemoved},null,8,["todoItem","onOnCancel","onOnRemove"])]),_:1},8,["title"]),_(O,{id:"add-todo-overlay",title:"Add new to do"},{default:k(()=>[io]),_:1})],64)}var _o=h(qe,[["render",uo],["__scopeId","data-v-7293671e"]]);const mo={components:{ActionButton:z},setup(){return{ActionButtonType:N}}};function vo(e,o,t,n,s,d){const a=m("action-button");return i(),R(a,{label:"Select tag...",type:n.ActionButtonType.TOP},null,8,["type"])}var po=h(mo,[["render",vo]]);const go={components:{TodoList:_o,TagSelector:po,NavBar:E}};function yo(e,o,t,n,s,d){const a=m("NavBar"),l=m("tag-selector"),v=m("todo-list");return i(),u(I,null,[_(a),_(l),_(v)],64)}var fo=h(go,[["render",yo]]);const ho=r("h1",null,"Todos history",-1),To=b({setup(e){return(o,t)=>(i(),u(I,null,[_(E),ho],64))}}),Io=b({setup(){const e=T(c.state.tags);return A(()=>c.state.tags,()=>{e.value=c.state.tags}),{list:e}}}),$o=r("h1",null,"Tag list",-1);function Oo(e,o,t,n,s,d){const a=m("router-link");return i(),u(I,null,[$o,r("ul",null,[(i(!0),u(I,null,W(e.list,l=>(i(),u("li",{key:l.id},[_(a,{to:{name:"edit-tag",params:{tagId:l.id}}},{default:k(()=>[D(f(l.name),1)]),_:2},1032,["to"])]))),128))])],64)}var Co=h(Io,[["render",Oo]]);const wo={components:{TagList:Co,ActionButton:z,NavBar:E},setup(){return{tags:T(c.state.tags),ActionButtonType:N}}};function Ao(e,o,t,n,s,d){const a=m("NavBar"),l=m("tag-list"),v=m("action-button");return i(),u(I,null,[_(a),_(l),_(v,{label:"Add a new tag",type:n.ActionButtonType.BOTTOM},null,8,["type"])],64)}var ko=h(wo,[["render",Ao]]);const Do={components:{Overlay:G},setup(){const o=ee().params.tagId;return{tag:K(()=>c.getters.getTagById(o)),handleClose:()=>{Q.push({name:"tags"})}}},mounted(){const[e]=Y();e("edit-tag")}};function bo(e,o,t,n,s,d){var l;const a=m("Overlay");return i(),R(a,{id:"edit-tag",title:(l=n.tag)==null?void 0:l.name,onClose:n.handleClose},{default:k(()=>{var v,O;return[r("h1",null,"Edit tag - "+f((v=n.tag)==null?void 0:v.name),1),r("div",null,"tag id: "+f((O=n.tag)==null?void 0:O.id),1)]}),_:1},8,["title","onClose"])}var No=h(Do,[["render",bo]]);const Bo=[{path:"/",name:"home",component:Ee},{path:"/todos",name:"todos",component:fo},{path:"/tags",name:"tags",component:ko},{path:"/edit-tag/:tagId",name:"edit-tag",component:No},{path:"/history",name:"history",component:To}],Q=oe({history:te(),routes:Bo});ne.add(se,ae,re,ce,de);le(Be).use(Q).use(c,Ie).component("icon",ie).mount("#app");
